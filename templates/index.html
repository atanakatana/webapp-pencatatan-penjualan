<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Aplikasi Pencatatan Penjualan</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- PENTING: Memanggil file CSS kustom Anda dari folder 'static' -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>

  <body>
    <!-- Toast Notification Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
      <div
        id="liveToast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header">
          <i id="toast-icon" class="bi bi-check-circle-fill me-2"></i>
          <strong class="me-auto" id="toast-title">Notifikasi</strong>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body" id="toast-body">Data berhasil disimpan.</div>
      </div>
    </div>

    <!-- =================================================================== -->
    <!-- KONTEN HALAMAN (LOGIN, DASHBOARD, DLL.) -->
    <!-- =================================================================== -->
    <div id="login-page" class="page">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-5 col-lg-4">
            <div class="card shadow-sm border-0">
              <div class="card-body p-4">
                <div class="text-center mb-4">
                  <i
                    class="bi bi-shop-window"
                    style="font-size: 3rem; color: #0d6efd"
                  ></i>
                  <h3 class="card-title mt-2">Selamat Datang</h3>
                  <p class="text-muted">Masuk untuk melanjutkan</p>
                </div>
                <form id="login-form">
                  <div class="mb-3">
                    <label for="username" class="form-label">Username</label>
                    <input
                      type="text"
                      class="form-control"
                      id="username"
                      placeholder="ketik 'lapak01', 'owner', atau 'ska'"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input
                      type="password"
                      class="form-control"
                      id="password"
                      value=""
                    />
                  </div>
                  <div class="d-grid mt-4">
                    <button
                      type="button"
                      class="btn btn-primary"
                      onclick="handleLogin()"
                    >
                      Login
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="lapak-dashboard" class="page container py-4">
      <header
        class="d-flex justify-content-between align-items-center pb-3 mb-4 border-bottom"
      >
        <div>
          <h4 class="mb-0">Halo, <span id="lapak-name"></span>!</h4>
          <p class="text-muted mb-0 small" id="current-date-lapak"></p>
        </div>
        <div>
          <button
            class="btn btn-outline-secondary btn-sm me-2"
            onclick="showPage('review-harian-page')"
          >
            <i class="bi bi-check2-circle"></i> Review & Selesai
          </button>
          <button
            class="btn btn-outline-danger btn-sm"
            onclick="handleLogout()"
          >
            <i class="bi bi-box-arrow-right"></i> Logout
          </button>
        </div>
      </header>
      <h5 class="mb-3">Menu Utama</h5>
      <div class="row g-3">
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('terima-barang-page')"
          >
            <div class="card-body text-center p-3">
              <i
                class="bi bi-box-arrow-in-down text-success"
                style="font-size: 2rem"
              ></i>
              <p class="card-title mt-2 mb-0 fw-bold small">Barang Masuk</p>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('penjualan-page')"
          >
            <div class="card-body text-center p-3">
              <i
                class="bi bi-cart-plus-fill text-primary"
                style="font-size: 2rem"
              ></i>
              <p class="card-title mt-2 mb-0 fw-bold small">Penjualan</p>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('lapor-return-page')"
          >
            <div class="card-body text-center p-3">
              <i class="bi bi-tools text-danger" style="font-size: 2rem"></i>
              <p class="card-title mt-2 mb-0 fw-bold small">Masalah & Return</p>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('history-laporan-page')"
          >
            <div class="card-body text-center p-3">
              <i
                class="bi bi-clock-history text-secondary"
                style="font-size: 2rem"
              ></i>
              <p class="card-title mt-2 mb-0 fw-bold small">History Laporan</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="terima-barang-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('lapak-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Terima Barang dari Supplier</h4>
      </header>
      <div class="mb-3">
        <label class="form-label fw-bold" for="supplier-select-barang-masuk"
          >1. Pilih Supplier</label
        ><select
          class="form-select"
          id="supplier-select-barang-masuk"
          onchange="updateProductList()"
        >
          <option selected value="">-- Pilih Supplier --</option>
        </select>
      </div>
      <div id="product-list-header" style="display: none">
        <hr />
        <h5 class="mb-3">2. Masukkan Jumlah Barang Diterima</h5>
      </div>
      <div id="product-list-container" class="mt-2"></div>
      <div class="d-grid mt-4">
        <button class="btn btn-success btn-lg" id="simpan-penerimaan-btn">
          Simpan Penerimaan
        </button>
      </div>
    </div>
    <div id="penjualan-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('lapak-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Catat Penjualan</h4>
      </header>
      <h5 class="mb-3">Tambah Penjualan Hari Ini</h5>
      <div id="penjualan-product-list-container"></div>
      <div class="my-4">
        <h6 class="mb-3">Metode Pembayaran</h6>
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            type="radio"
            name="paymentMethod"
            id="paymentCash"
            value="cash"
            checked
          /><label class="form-check-label" for="paymentCash"
            ><i class="bi bi-cash-coin"></i> Cash</label
          >
        </div>
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            type="radio"
            name="paymentMethod"
            id="paymentQris"
            value="qris"
          /><label class="form-check-label" for="paymentQris"
            ><i class="bi bi-qr-code-scan"></i> QRIS</label
          >
        </div>
      </div>
      <div class="d-grid mt-4">
        <button class="btn btn-primary btn-lg" id="simpan-penjualan-btn">
          Simpan Penjualan
        </button>
      </div>
      <hr class="my-4" />
      <h5 class="mt-4">Rincian Penjualan Hari Ini</h5>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Produk</th>
              <th class="text-center">Pembayaran</th>
              <th class="text-end">Nominal</th>
            </tr>
          </thead>
          <tbody id="penjualan-harian-tbody"></tbody>
        </table>
      </div>
    </div>
    <div id="lapor-return-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('lapak-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Laporan Masalah & Return</h4>
      </header>
      <div class="mb-3">
        <label for="jenis-laporan-select" class="form-label fw-bold"
          >Pilih Jenis Laporan</label
        ><select
          class="form-select"
          id="jenis-laporan-select"
          onchange="toggleLaporanForm()"
        >
          <option selected value="">-- Pilih Jenis --</option>
          <option value="return">Return Produk Rusak</option>
          <option value="masalah">Lapor Masalah Supply</option>
        </select>
      </div>
      <form id="form-return" style="display: none">
        <hr />
        <h5 class="mb-3">Formulir Return Produk</h5>
        <div class="mb-3">
          <label class="form-label">Produk yang Di-return</label
          ><select class="form-select" id="return-product-select"></select>
        </div>
        <div class="mb-3">
          <label class="form-label">Jumlah Rusak / Return</label
          ><input
            type="number"
            id="return-jumlah"
            class="form-control"
            placeholder="Jumlah produk rusak"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Alasan Return</label
          ><textarea
            class="form-control"
            id="return-alasan"
            rows="3"
            placeholder="Contoh: Kemasan sobek saat diterima"
          ></textarea>
        </div>
        <div class="alert alert-warning mt-4">
          <i class="bi bi-info-circle-fill"></i><strong>Catatan:</strong> Produk
          yang direturn akan ditambahkan kembali ke total stok dengan keterangan
          "rusak" dan tidak akan dihitung sebagai stok yang siap dijual.
        </div>
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-info btn-lg">
            Kirim Laporan Return
          </button>
        </div>
      </form>
      <form id="form-masalah-supply" style="display: none">
        <hr />
        <h5 class="mb-3">Formulir Masalah Supply</h5>
        <div class="mb-3">
          <label for="masalah-supply-detail" class="form-label"
            >Detail Masalah</label
          ><select class="form-select" id="masalah-supply-detail">
            <option selected>-- Pilih Detail --</option>
            <option>Barang diterima rusak</option>
            <option>Tidak menerima produk dari supplier</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Produk Terkait (Jika Ada)</label
          ><select class="form-select" id="masalah-product-select"></select>
        </div>
        <div class="mb-3">
          <label class="form-label">Catatan Tambahan</label
          ><textarea
            class="form-control"
            id="masalah-catatan"
            rows="3"
          ></textarea>
        </div>
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-danger btn-lg">
            Kirim Laporan Masalah
          </button>
        </div>
      </form>
    </div>
    <div id="review-harian-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('lapak-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Review Laporan Harian</h4>
      </header>
      <p class="text-muted">
        Periksa kembali semua aktivitas sebelum konfirmasi. Anda dapat
        mengoreksi jumlah penjualan jika ada kesalahan input.
      </p>
      <div class="card review-summary-card border-0 mb-4">
        <div class="card-body">
          <h5 class="card-title">Ringkasan Hari Ini</h5>
          <ul class="list-group list-group-flush mt-3">
            <li
              class="list-group-item d-flex justify-content-between align-items-center bg-transparent px-0"
            >
              Pendapatan Cash<span class="fw-bold" id="review-pendapatan-cash"
                >Rp 0</span
              >
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center bg-transparent px-0"
            >
              Pendapatan QRIS<span class="fw-bold" id="review-pendapatan-qris"
                >Rp 0</span
              >
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center fw-bold bg-transparent px-0 border-top pt-2"
            >
              Total Pendapatan<span
                class="badge bg-success rounded-pill fs-6"
                id="review-total-pendapatan"
                >Rp 0</span
              >
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center fw-bold bg-transparent px-0"
            >
              Total Produk Terjual<span
                class="badge bg-primary rounded-pill fs-6"
                id="review-total-produk-terjual"
                >0 Pcs</span
              >
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center fw-bold bg-transparent px-0"
            >
              Total Sisa Produk<span
                class="badge bg-info rounded-pill fs-6"
                id="review-total-sisa-produk"
                >0 Pcs</span
              >
            </li>
          </ul>
        </div>
      </div>
      <div class="accordion" id="reviewAccordion">
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button
              class="accordion-button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseOne"
            >
              Barang Diterima
            </button>
          </h2>
          <div
            id="collapseOne"
            class="accordion-collapse collapse show"
            data-bs-parent="#reviewAccordion"
          >
            <div class="accordion-body" id="review-barang-masuk-list"></div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseTwo"
            >
              Barang Terjual
            </button>
          </h2>
          <div
            id="collapseTwo"
            class="accordion-collapse collapse"
            data-bs-parent="#reviewAccordion"
          >
            <div class="accordion-body p-0">
              <ul
                class="list-group list-group-flush"
                id="review-penjualan-list"
              ></ul>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseThree"
            >
              Laporan Masalah & Return
            </button>
          </h2>
          <div
            id="collapseThree"
            class="accordion-collapse collapse"
            data-bs-parent="#reviewAccordion"
          >
            <div class="accordion-body" id="review-masalah-list"></div>
          </div>
        </div>
      </div>
      <div class="d-grid mt-4">
        <button class="btn btn-success btn-lg" id="konfirmasi-laporan-btn">
          <i class="bi bi-check2-circle-fill"></i> Konfirmasi Laporan
        </button>
      </div>
    </div>
    <div id="history-laporan-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('lapak-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">History Laporan</h4>
      </header>
      <div class="accordion" id="historyAccordion">
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button
              class="accordion-button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseHistory1"
            >
              Laporan: Minggu, 14 September 2025
            </button>
          </h2>
          <div
            id="collapseHistory1"
            class="accordion-collapse collapse show"
            data-bs-parent="#historyAccordion"
          >
            <div class="accordion-body">
              <div class="card review-summary-card border-0 mb-3">
                <div class="card-body">
                  <ul class="list-group list-group-flush">
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center bg-transparent px-0"
                    >
                      Pendapatan Cash<span class="fw-bold">Rp 100.000</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center bg-transparent px-0"
                    >
                      Pendapatan QRIS<span class="fw-bold">Rp 50.000</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center fw-bold bg-transparent px-0 border-top pt-2"
                    >
                      Total Pendapatan<span
                        class="badge bg-success rounded-pill fs-6"
                        >Rp 150.000</span
                      >
                    </li>
                  </ul>
                </div>
              </div>
              <h6>Rincian Penjualan:</h6>
              <p class="text-muted">Daftar transaksi untuk hari ini...</p>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseHistory2"
            >
              Laporan: Sabtu, 13 September 2025
            </button>
          </h2>
          <div
            id="collapseHistory2"
            class="accordion-collapse collapse"
            data-bs-parent="#historyAccordion"
          >
            <div class="accordion-body">...</div>
          </div>
        </div>
      </div>
    </div>
    <div id="owner-dashboard" class="page container py-4">
      <header
        class="d-flex justify-content-between align-items-center pb-3 mb-4 border-bottom"
      >
        <div>
          <h4 class="mb-0">Dashboard, <span id="owner-name"></span></h4>
          <p class="text-muted mb-0 small" id="current-date-owner"></p>
        </div>
        <button class="btn btn-outline-danger btn-sm" onclick="handleLogout()">
          <i class="bi bi-box-arrow-right"></i> Logout
        </button>
      </header>
      <div class="row g-3 mb-4">
        <div class="col-md-6">
          <div
            class="card text-bg-danger shadow-sm menu-card"
            onclick="showPage('owner-laporan-utang-page')"
          >
            <div class="card-body">
              <h6 class="card-title">
                <i class="bi bi-truck"></i> Biaya Belum Dibayarkan
              </h6>
              <h4 class="display-6" id="owner-biaya-card">Rp 0</h4>
              <small>Klik untuk detail harian</small>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div
            class="card text-bg-success shadow-sm menu-card"
            onclick="showPage('owner-laporan-pendapatan-page')"
          >
            <div class="card-body">
              <h6 class="card-title">
                <i class="bi bi-cash-coin"></i> Pendapatan Bulan Ini
              </h6>
              <h4 class="display-6" id="owner-pendapatan-card">Rp 0</h4>
              <small>Klik untuk detail harian</small>
            </div>
          </div>
        </div>
      </div>
      <h5 class="mb-3">Menu Data & Pengelolaan</h5>
      <div class="row g-3">
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('owner-data-user-page')"
          >
            <div class="card-body text-center p-3">
              <i
                class="bi bi-person-badge-fill text-info"
                style="font-size: 2rem"
              ></i>
              <p class="card-title mt-2 mb-0 fw-bold small">Data User</p>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('owner-data-lapak-page')"
          >
            <div class="card-body text-center p-3">
              <i class="bi bi-shop text-success" style="font-size: 2rem"></i>
              <p class="card-title mt-2 mb-0 fw-bold small">Data Lapak</p>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('owner-data-supplier-page')"
          >
            <div class="card-body text-center p-3">
              <i class="bi bi-truck text-warning" style="font-size: 2rem"></i>
              <p class="card-title mt-2 mb-0 fw-bold small">Data Supplier</p>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-4">
          <div
            class="card menu-card h-100"
            onclick="showPage('owner-pengaturan-page')"
          >
            <div class="card-body text-center p-3">
              <i class="bi bi-gear-fill text-dark" style="font-size: 2rem"></i>
              <p class="card-title mt-2 mb-0 fw-bold small">Pengaturan</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="owner-laporan-utang-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Biaya Harian Belum Dibayar</h4>
      </header>
      <div class="text-center mb-3">
        <div class="btn-group" role="group">
          <button
            type="button"
            class="btn btn-outline-secondary"
            onclick="changeOwnerReportDate(-1, 'biaya')"
          >
            <i class="bi bi-chevron-left"></i> Kemarin</button
          ><button
            type="button"
            class="btn btn-secondary"
            id="biaya-date-display"
            disabled
          ></button
          ><button
            type="button"
            class="btn btn-outline-secondary"
            onclick="changeOwnerReportDate(1, 'biaya')"
          >
            Besok <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>
      <div class="card">
        <div class="card-header fw-bold">Rincian Biaya</div>
        <div class="table-responsive">
          <table class="table mb-0">
            <thead>
              <tr>
                <th>Supplier</th>
                <th>Lapak</th>
                <th>Nominal</th>
              </tr>
            </thead>
            <tbody id="biaya-table-body"></tbody>
          </table>
        </div>
        <div
          class="card-footer d-flex justify-content-between align-items-center fw-bold list-group-item-dark"
        >
          <span>Total Hari Ini</span><span id="biaya-total-harian">Rp 0</span>
        </div>
      </div>
      <div class="d-grid mt-4">
        <button class="btn btn-success btn-lg">
          <i class="bi bi-check-circle-fill"></i> Konfirmasi Lunas untuk Hari
          Ini
        </button>
      </div>
    </div>
    <div id="owner-laporan-pendapatan-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Rincian Pendapatan Harian</h4>
      </header>
      <div class="text-center mb-3">
        <div class="btn-group" role="group">
          <button
            type="button"
            class="btn btn-outline-secondary"
            onclick="changeOwnerReportDate(-1, 'pendapatan')"
          >
            <i class="bi bi-chevron-left"></i> Kemarin</button
          ><button
            type="button"
            class="btn btn-secondary"
            id="pendapatan-date-display"
            disabled
          ></button
          ><button
            type="button"
            class="btn btn-outline-secondary"
            onclick="changeOwnerReportDate(1, 'pendapatan')"
          >
            Besok <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>
      <div class="accordion" id="pendapatanLapakAccordion"></div>
      <div class="card mt-3">
        <div
          class="card-body d-flex justify-content-between align-items-center list-group-item-dark fw-bold"
        >
          <span>Total Pendapatan Hari Ini</span
          ><span id="pendapatan-total-harian">Rp 0</span>
        </div>
      </div>
    </div>
    <div id="owner-data-user-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Data User</h4>
      </header>
      <div class="d-grid mb-3">
        <button
          class="btn btn-primary"
          onclick="showPage('owner-tambah-user-page')"
        >
          <i class="bi bi-plus-circle-fill"></i> Tambah User Baru
        </button>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Nama Lengkap</th>
              <th>NIK</th>
              <th>Username</th>
              <th>Email</th>
              <th>Nomor Kontak</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="user-table-body"></tbody>
        </table>
      </div>
    </div>
    <div id="owner-tambah-user-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-data-user-page')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Tambah User Baru</h4>
      </header>
      <form id="add-user-form">
        <div class="mb-3">
          <label class="form-label">Nama Lengkap</label
          ><input
            type="text"
            class="form-control"
            id="add-user-nama"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">NIK</label
          ><input
            type="number"
            class="form-control"
            id="add-user-nik"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Username</label
          ><input
            type="text"
            class="form-control"
            id="add-user-username"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Email</label
          ><input
            type="email"
            class="form-control"
            id="add-user-email"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Nomor Kontak</label
          ><input
            type="tel"
            class="form-control"
            id="add-user-kontak"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Password Sementara</label
          ><input
            type="password"
            class="form-control"
            id="add-user-password"
            required
          />
        </div>
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-success">Simpan User</button>
        </div>
      </form>
    </div>
    <div id="owner-data-lapak-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Data Lapak</h4>
      </header>
      <div class="d-grid mb-3">
        <button
          class="btn btn-primary"
          onclick="showPage('owner-tambah-lapak-page')"
        >
          <i class="bi bi-plus-circle-fill"></i> Tambah Lapak Baru
        </button>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Lokasi Lapak</th>
              <th>Penanggung Jawab</th>
              <th>Nomor Kontak</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="lapak-table-body"></tbody>
        </table>
      </div>
    </div>
    <div id="owner-tambah-lapak-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-data-lapak-page')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Tambah Lapak Baru</h4>
      </header>
      <form id="add-lapak-form">
        <div class="mb-3">
          <label class="form-label">Lokasi Lapak</label
          ><input
            type="text"
            class="form-control"
            id="add-lapak-lokasi"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Penanggung Jawab</label
          ><select class="form-select" id="lapak-pj-select" required></select>
        </div>
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-success">Simpan Lapak</button>
        </div>
      </form>
    </div>
    <div id="owner-data-supplier-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Data Supplier</h4>
      </header>
      <div class="d-grid mb-3">
        <button
          class="btn btn-primary"
          onclick="showPage('owner-tambah-supplier-page')"
        >
          <i class="bi bi-plus-circle-fill"></i> Tambah Supplier Baru
        </button>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Nama Supplier</th>
              <th>Kontak</th>
              <th>Nomor Register</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="supplier-table-body"></tbody>
        </table>
      </div>
    </div>
    <div id="owner-tambah-supplier-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-data-supplier-page')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Tambah Supplier Baru</h4>
      </header>
      <form id="add-supplier-form">
        <div class="mb-3">
          <label class="form-label">Nama Supplier</label
          ><input
            type="text"
            id="add-supplier-nama"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Nama Alias</label
          ><input type="text" id="add-supplier-alias" class="form-control" />
        </div>
        <div class="mb-3">
          <label class="form-label">Kontak</label
          ><input
            type="tel"
            id="add-supplier-kontak"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Nomor Register</label
          ><input
            type="text"
            id="add-supplier-register"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Alamat</label
          ><textarea
            class="form-control"
            id="add-supplier-alamat"
            rows="3"
          ></textarea>
        </div>
        <div class="mb-3">
          <label class="form-label">Bank</label
          ><select class="form-select" id="add-supplier-bank">
            <option selected>-- Pilih Bank --</option>
            <option value="BCA">BCA</option>
            <option value="Mandiri">Mandiri</option>
            <option value="BRI">BRI</option>
            <option value="BNI">BNI</option>
            <option value="Lainnya">Lainnya</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Nomor Rekening</label
          ><input
            type="number"
            id="add-supplier-rekening"
            class="form-control"
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Password Akun Supplier</label
          ><input
            type="password"
            id="add-supplier-password"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <hr />
          <h6>Produk yang Disediakan</h6>
          <div id="product-fields-container"></div>
          <button
            type="button"
            class="btn btn-sm btn-outline-secondary mt-2"
            onclick="addProductField()"
          >
            + Tambah Produk
          </button>
        </div>
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-success">Simpan Supplier</button>
        </div>
      </form>
    </div>
    <div id="owner-pengaturan-page" class="page container py-4">
      <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
        <button
          class="btn btn-light me-3"
          onclick="showPage('owner-dashboard')"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <h4 class="mb-0">Pengaturan</h4>
      </header>
      <div class="card mb-4">
        <div class="card-header fw-bold">Pengaturan Tampilan</div>
        <div class="card-body">
          <div class="form-check form-switch mb-3">
            <input
              class="form-check-input"
              type="checkbox"
              role="switch"
              id="theme-switcher"
              onclick="toggleTheme()"
            /><label class="form-check-label" for="theme-switcher"
              >Gunakan Tema Gelap</label
            >
          </div>
          <h6>Tata Letak Menu Dashboard</h6>
          <p class="text-muted small">
            Representasi tata letak menu. Fungsionalitas drag-and-drop akan
            diimplementasikan pada versi final.
          </p>
          <ul class="list-group">
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Kelola User <i class="bi bi-grip-vertical"></i>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Kelola Supplier <i class="bi bi-grip-vertical"></i>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Pengaturan <i class="bi bi-grip-vertical"></i>
            </li>
          </ul>
        </div>
      </div>
      <div class="card mb-4">
        <div class="card-header fw-bold">Pembaruan Lisensi</div>
        <div class="card-body">
          <p class="text-muted">Lisensi Anda aktif sampai: 15 September 2026</p>
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              placeholder="Masukkan Kode OTP"
            /><button
              class="btn btn-secondary"
              type="button"
              onclick="alert('Kode OTP telah dikirim ke nomor Anda.')"
            >
              Minta Kode OTP
            </button>
          </div>
          <div class="d-grid mt-2">
            <button
              class="btn btn-primary"
              onclick="alert('Lisensi berhasil diperbarui!')"
            >
              Perbarui Lisensi
            </button>
          </div>
        </div>
      </div>
      <footer class="text-center mt-5">
        <p class="text-muted small mb-0">Versi Aplikasi: 1.0.0-beta</p>
        <p class="text-muted small mb-0">
          &copy; 2025 Aplikasi Penjualan Anda - atanakatana
        </p>
      </footer>
    </div>

    <!-- =================================================================== -->
    <!-- HALAMAN BARU: DASHBOARD SUPPLIER -->
    <!-- =================================================================== -->
    <div id="supplier-dashboard" class="page container py-4">
      <header
        class="d-flex justify-content-between align-items-center pb-3 mb-4 border-bottom"
      >
        <div>
          <h4 class="mb-0">Dashboard, <span id="supplier-name"></span></h4>
          <p class="text-muted mb-0 small" id="current-date-supplier"></p>
        </div>
        <button class="btn btn-outline-danger btn-sm" onclick="handleLogout()">
          <i class="bi bi-box-arrow-right"></i> Logout
        </button>
      </header>
      <h5 class="mb-3">Laporan Penjualan Produk Anda</h5>
      <div class="accordion" id="supplierReportAccordion"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
